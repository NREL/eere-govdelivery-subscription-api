"use strict";$(document).ready(function(){function e(e){var r=[];return e.sort(function(e,r){return e.name>r.name?1:r.name>e.name?-1:0}),r.push(e.shift()),e.forEach(function(e){var s=r[r.length-1];e.name===s.name?s.value+=", "+e.value:r.push(e)}),r}function r(){$("input[type=submit]").attr("disabled","disabled"),$("#response").addClass("hidden");var r="https://stage-api.govdelivery.com/api/add_script_subscription",s="t2iRUf5kNknlGQAO3H_XTbPrGg1sOIo_J1Me_d9vuzKXyiLzvjOakJOjuiJ4b4JinRWzNcik37EtO_zzEflbow",n=$.Deferred(),t=[],a=function(e){$("input[type=submit]").removeAttr("disabled"),$("#response").removeClass("hidden"),$("#response").html(e)};return document.getElementById("api")||$("<input />",{id:"api",name:"k",value:s,type:"hidden"}).appendTo("#form-subscribe"),t=$("#form-subscribe").serializeArray(),t=e(t),n=$.ajax({url:r,data:t,dataType:"jsonp",jsonp:"c",jsonpCallback:"jsonpcallback"}),n.done(function(e){var r=void 0;e.errors?(r='<div class="bg-danger"><p><strong>There was a problem submitting the form.</strong></p>',r+="<ul>",Object.keys(e.errors).forEach(function(s){e.errors[s].forEach(function(e){r+="<li> "+e+" </li>"})}),r+="</ul></div>"):"Topic not found."===e.message?r='<p class="bg-danger"><strong>There was a problem with the form. Topic not found.</strong></p>':($("#form-subscribe").fadeOut("fast"),r='<p class="bg-success"><strong>You have been successfully subscribed. You should receive a confirmation email shortly.</strong></p>'),a(r)}),n.fail(function(e){a('<p class="bg-danger"><strong>There was a problem submitting your information. Please contact the webmaster.</strong></p>');var r=JSON.stringify(e,null,"&nbsp;");console.debug("ajax error:",e,r)}),!1}$("#form-subscribe").validate({rules:{q_15675:{required:!0,minlength:1},q_15655:{required:!0,minlength:1}},messages:{e:"A valid email is required",q_15675:"At least one topic is required.",q_15655:"At least one sector is required."},errorPlacement:function(e,r){$(r).hasClass("require-one")?$(r).parents(".form-group").children(".error-holder").append(e):e.insertAfter(r)},submitHandler:r})});